<!DOCTYPE html>
<html lang="fa">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ | Supernatural</title>
  <link rel="icon" type="image/png" href="../assets/icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Vazirmatn', sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
      background: #222;
      color: #fff;
    }

    .sitename-link {
      color: #fff;
      font-weight: 700;
      font-size: 1.5em;
      text-decoration: none;
    }

    .header-right a {
      color: #fff;
      margin-left: 15px;
      text-decoration: none;
    }

    .btn-login {
      background: #ff5722;
      padding: 5px 10px;
      border-radius: 5px;
    }

    .cart-icon {
      cursor: pointer;
      position: relative;
    }

    .cart-count {
      background: red;
      color: #fff;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.8em;
      position: absolute;
      top: -10px;
      right: -10px;
    }

    .shop-container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .shop-title {
      text-align: center;
      margin-bottom: 20px;
    }

    .products-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .sort-options span {
      margin-right: 10px;
    }

    .sort-btn {
      margin-left: 5px;
      padding: 5px 10px;
      cursor: pointer;
    }

    .sort-btn.active {
      background: #222;
      color: #fff;
      border-radius: 5px;
    }

    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .product-card {
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .product-card img {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .product-card .price {
      font-weight: 700;
      margin: 10px 0;
    }

    .btn-buy {
      background: #ff5722;
      border: none;
      padding: 8px 12px;
      color: #fff;
      cursor: pointer;
      border-radius: 5px;
    }
  </style>
</head>

<body>

  <header>
    <a href="#" class="sitename-link">Supernatural</a>
    <nav class="header-right">
      <a href="#about" class="nav-link">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a>
      <a href="#bots" class="nav-link">Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§</a>
      <a href="#contact" class="nav-link">ØªÙ…Ø§Ø³</a>
      <a href="order.html" class="nav-link">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡</a>
      <a href="login.html" class="btn-login">Login</a>
      <div class="cart-icon" onclick="window.location.href='cart.html'">
        ğŸ›’ <span id="cartCount" class="cart-count">0</span>
      </div>
    </nav>
  </header>

  <main class="shop-container">
    <h2 class="shop-title" id="categoryTitle">ğŸ›ï¸ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>

    <div class="products-header">
      <div class="sort-options">
        <span>Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ:</span>
        <button class="sort-btn active" data-sort="cheap">Ø§Ø±Ø²Ø§Ù†â€ŒØªØ±ÛŒÙ†</button>
        <button class="sort-btn" data-sort="expensive">Ú¯Ø±Ø§Ù†â€ŒØªØ±ÛŒÙ†</button>
      </div>
      <div class="product-count" id="productCount">0 Ú©Ø§Ù„Ø§</div>
    </div>

    <div class="products" id="productsContainer"></div>
  </main>

  <script>
    // ===== ØªØ¹Ø±ÛŒÙ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ù…ÙˆÙ†Ù‡ =====
    const categories = [
      {
        id: "security",
        title: "Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ",
        products: [
          { id: "bot1", name: "Ø±Ø¨Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ A", desc: "Ø­ÙØ§Ø¸Øª Ø§Ø² Ø³Ø±ÙˆØ± Ø´Ù…Ø§", price: "100,000 ØªÙˆÙ…Ø§Ù†", img: "https://via.placeholder.com/200" },
          { id: "bot2", name: "Ø±Ø¨Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ B", desc: "Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†", price: "200,000 ØªÙˆÙ…Ø§Ù†", img: "https://via.placeholder.com/200" },
          { id: "bot3", name: "Ø±Ø¨Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ C", desc: "Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ùˆ Ù‡Ø´Ø¯Ø§Ø±", price: "150,000 ØªÙˆÙ…Ø§Ù†", img: "https://via.placeholder.com/200" }
        ]
      },
      {
        id: "fun",
        title: "Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±Ú¯Ø±Ù…ÛŒ",
        products: [
          { id: "bot4", name: "Ø±Ø¨Ø§Øª Ø³Ø±Ú¯Ø±Ù…ÛŒ A", desc: "Ø¨Ø§Ø²ÛŒ Ùˆ Ø³Ø±Ú¯Ø±Ù…ÛŒ", price: "50,000 ØªÙˆÙ…Ø§Ù†", img: "https://via.placeholder.com/200" },
          { id: "bot5", name: "Ø±Ø¨Ø§Øª Ø³Ø±Ú¯Ø±Ù…ÛŒ B", desc: "ØªØ³Øª Ùˆ Ø´ÙˆØ®ÛŒ", price: "70,000 ØªÙˆÙ…Ø§Ù†", img: "https://via.placeholder.com/200" }
        ]
      }
    ];

    const urlParams = new URLSearchParams(window.location.search);
    const categoryId = urlParams.get("cat") || "security";

    const container = document.getElementById("productsContainer");
    const title = document.getElementById("categoryTitle");
    const productCountEl = document.getElementById("productCount");
    const sortBtns = document.querySelectorAll(".sort-btn");

    const category = categories.find(c => c.id === categoryId);

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCartCount() {
      document.getElementById("cartCount").innerText = cart.length;
    }

    function saveCart() {
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
    }

    function renderProducts(list) {
      container.innerHTML = "";
      list.forEach(product => {
        const inCart = cart.find(p => p.id === product.id);
        const card = document.createElement("div");
        card.className = "product-card";
        card.innerHTML = `
          <img src="${product.img}" alt="${product.name}">
          <h3>${product.name}</h3>
          <p>${product.desc}</p>
          <p class="price">${product.price}</p>
          <button class="btn-buy">${inCart ? 'âŒ Ø­Ø°Ù Ø§Ø² Ø³Ø¨Ø¯' : 'â• Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯'}</button>
        `;
        const btn = card.querySelector(".btn-buy");
        btn.addEventListener("click", () => {
          if (cart.find(p => p.id === product.id)) {
            cart = cart.filter(p => p.id !== product.id);
            btn.innerText = "â• Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯";
          } else {
            cart.push(product);
            btn.innerText = "âŒ Ø­Ø°Ù Ø§Ø² Ø³Ø¨Ø¯";
          }
          saveCart();
        });
        container.appendChild(card);
      });
      productCountEl.innerText = list.length + " Ú©Ø§Ù„Ø§";
      updateCartCount();
    }

    function sortProducts(type) {
      let sorted = [...category.products];
      if (type === "cheap") {
        sorted.sort((a, b) =>
          parseInt(a.price.replace(/\D/g, "")) -
          parseInt(b.price.replace(/\D/g, ""))
        );
      } else if (type === "expensive") {
        sorted.sort((a, b) =>
          parseInt(b.price.replace(/\D/g, "")) -
          parseInt(a.price.replace(/\D/g, ""))
        );
      }
      renderProducts(sorted);
    }

    if (!category) {
      title.innerText = "âŒ Ø¯Ø³ØªÙ‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯";
    } else {
      title.innerText = "ğŸ›ï¸ " + category.title;
      sortProducts("cheap");

      sortBtns.forEach(btn => {
        btn.addEventListener("click", () => {
          sortBtns.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          sortProducts(btn.dataset.sort);
        });
      });
    }
  </script>

</body>

</html>
